extends _layout.pug
append js
  script(src=assetHashPath('profile/account.js'))
block right_content
  //- 头像上传
  .c-uc-chg-head 修改头像
  .c-uc-acc-chg
    div(style={'margin-bottom': '1em'})
      div(style={'margin-bottom': '1em'}) 头像：
      img(class='js-cur-ava u-round-border' width=70 height=70 src=user.avatarUrl() alt=user.name)
      span(class='c-uc-acc-chg__upload-ava o-btn o-btn-normal')
        label(for='avatar') 上传头像
        input.absolute(type='file' id='avatar' name='avatar')

    //- 头像裁减框
    .o-overlay-bk
    form(method='post' action='/profile/change_avatar2' class='js-crop-dlg o-overlay-dlg' style={width: '500px'})
      input(type='hidden' name='origin_img_path')
      input(type='hidden' name='x')
      input(type='hidden' name='y')
      input(type='hidden' name='width')
      input(type='hidden' name='height')
      .o-overlay-dlg__head 裁减并替换新的头像
      .o-overlay-dlg__body
        .c-ava-crop-area.js-ava-crop-area
          img.c-ava-crop-area__ori-img.js-origin-img
          .c-ava-crop-area__ret-img
            img.js-ret-img.absolute
          .c-ava-crop-area__move-area.js-crop-edge
          .c-ava-crop-area__left-edge.js-crop-edge
          .c-ava-crop-area__top-edge.js-crop-edge
          .c-ava-crop-area__right-edge.js-crop-edge
          .c-ava-crop-area__bottom-edge.js-crop-edge
          .c-ava-crop-area__tl-corner.js-crop-edge
          .c-ava-crop-area__tm-corner.js-crop-edge
          .c-ava-crop-area__tr-corner.js-crop-edge
          .c-ava-crop-area__lm-corner.js-crop-edge
          .c-ava-crop-area__rm-corner.js-crop-edge
          .c-ava-crop-area__bl-corner.js-crop-edge
          .c-ava-crop-area__bm-corner.js-crop-edge
          .c-ava-crop-area__br-corner.js-crop-edge
      .o-overlay-dlg__foot
        input(type='submit' class='o-btn o-btn-primary ol-ok u-fir-span' value='保存')
        input(type='button' class='o-btn o-btn-normal ol-cancel' value='取消')

  //- 账号修改
  .c-uc-chg-head 修改账号信息
  form(method='post' action='/profile/change_account' class='js-account-edit')

    if flash.success
      .u-flash-success= flash.success
    else if flash.error
      .u-flash-error= flash.error

    .o-fm-grp
      label(for='name') 用户名：
      input(type='text', name='name', id='name', class='o-fm-ctl', value=user.name)

    .o-fm-grp
      label(for='email') Email：
      input(type='email', name='email', id='email', class='o-fm-ctl', value=user.email)

    .o-fm-grp
      label(for='phone') 电话：
      input(type='text', name='phone', id='phone', class='o-fm-ctl', value=user.phone)

    .o-fm-grp
      input(type='submit', value='更新账号信息' class='o-btn o-btn-primary u-fir-span')
      span.u-bold-text.u-success-result.js-result-hint(style={display: 'none'})

  //- 修改密码
  .c-uc-chg-head 修改密码
  form(method='post' action='/profile/change_password' class='js-password-edit')

    if flash.success
      .flash-success= flash.success
    else if flash.error
      .flash-error= flash.error

    .o-fm-grp
      label(for='old_pwd') 旧密码：
      input(type='password', name='old_pwd', id='old_pwd', class='o-fm-ctl')

    .o-fm-grp
      label(for='new_pwd') 新密码：
      input(type='password', name='new_pwd', id='new_pwd', class='o-fm-ctl')

    .o-fm-grp
      label(for='c_new_pwd') 确认新密码：
      input(type='password', name='c_new_pwd', id='c_new_pwd', class='o-fm-ctl')

    .o-fm-grp
      input(type='submit', value='更新密码' class='o-btn o-btn-primary u-fir-span')
      span.u-bold-text.u-success-result.js-result-hint(style={display: 'none'})
